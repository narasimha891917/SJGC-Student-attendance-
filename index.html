<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login/Register with Gmail - Firebase</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; background: #f5f5f5; }
    h2 { margin-top: 40px; }
    input { display: block; margin: 10px 0; padding: 8px; width: 250px; }
    button { padding: 10px 15px; margin-top: 10px; }
    .section { background: white; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 0 10px #ccc; }
  </style>
</head>
<body>

  <h1>Firebase Login/Register (Gmail)</h1>

  <div class="section">
    <h2>Create Account</h2>
    <input type="text" id="regName" placeholder="Name">
    <input type="tel" id="regPhone" placeholder="Phone Number">
    <input type="text" id="regCollege" placeholder="College">
    <input type="text" id="regGroup" placeholder="Group">
    <input type="email" id="regEmail" placeholder="Email (Gmail)">
    <input type="password" id="regPassword" placeholder="Password">
    <button onclick="register()">Create Account</button>
  </div>

  <div class="section">
    <h2>Login</h2>
    <input type="email" id="loginEmail" placeholder="Email (Gmail)">
    <input type="password" id="loginPassword" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>

  <div class="section">
    <h2>Forgot Password</h2>
    <input type="email" id="forgotEmail" placeholder="Enter your Gmail">
    <button onclick="recover()">Send Reset Link</button>
  </div>

  <script>
    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyD_5OXqGIcR2yH_nGC8GVgmLwJfJaQnmuw",
      authDomain: "student-dashboard-821ae.firebaseapp.com",
      projectId: "student-dashboard-821ae",
      storageBucket: "student-dashboard-821ae.appspot.com",
      messagingSenderId: "785480958148",
      appId: "1:785480958148:web:bb187cfe8d969aafca0991",
      measurementId: "G-01QDZ9VRJ4"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Register function
    function register() {
      const name = document.getElementById("regName").value.trim();
      const phone = document.getElementById("regPhone").value.trim();
      const college = document.getElementById("regCollege").value.trim();
      const group = document.getElementById("regGroup").value.trim();
      const email = document.getElementById("regEmail").value.trim();
      const password = document.getElementById("regPassword").value.trim();

      if (!name || !phone || !college || !group || !email || !password) {
        alert("Please fill in all fields.");
        return;
      }

      auth.createUserWithEmailAndPassword(email, password)
        .then(userCredential => {
          alert("Account created successfully!");
          // Save extra info to localStorage or Firebase DB if needed
        })
        .catch(error => {
          if (error.code === "auth/email-already-in-use") {
            alert("Email is already registered. Please log in.");
          } else {
            alert("Registration Error: " + error.message);
          }
        });
    }

    // Login function
    function login() {
      const email = document.getElementById("loginEmail").value.trim();
      const password = document.getElementById("loginPassword").value.trim();

      if (!email || !password) {
        alert("Please enter your Gmail and password.");
        return;
      }

      auth.signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          alert("Logged in successfully!");
          // Redirect to dashboard if needed
        })
        .catch(error => {
          alert("Login failed: " + error.message);
        });
    }

    // Password reset function
    function recover() {
      const email = document.getElementById("forgotEmail").value.trim();

      if (!email) {
        alert("Please enter your Gmail to reset password.");
        return;
      }

      auth.sendPasswordResetEmail(email)
        .then(() => {
          alert("Password reset link sent to: " + email);
        })
        .catch(error => {
          alert("Error sending reset link: " + error.message);
        });
    }
  </script>

</body>
</html>
